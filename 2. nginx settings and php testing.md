windows 기준 // nginx + php 환경셋팅 가이드


## 1. nginx 다운로드 및 설치 위치
https://nginx.org/en/download.html
> 보통은 `Mainline` 운영 서버는 `Stable` 대부분 Mainline Windows용 zip 사용해도 무방

- 설치 위치
```
C:\
```
- PHP 압축 해제 위치 추천
```
C:\
```

## 2. Nginx 설정
- `nginx\conf\nginx.conf` 파일 열기
- 최소 서버 블록 예시는 아래와 같다.

```
server {
    listen       80;
    server_name  localhost;
    root         C:/nginx/html;

    index index.php index.html index.htm;

    location / {
        try_files $uri $uri/ =404;
    }

    location ~ \.php$ {
        fastcgi_pass   127.0.0.1:9000;
        fastcgi_index  index.php;
        include        fastcgi_params;
        fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;
    }
}
```
- 포트 변경 가능 : `listen: 8080;`
- `root` 경로에 PHP 코드 넣으면 됨 (예: 그누보드)

## 3. PHP 설치 

→ 윈도우를 위한 php 설치링크 https://windows.php.net/downloads/releases/archives/

1. 알맞은 PHP 버전 선택하여 다운로드
2. 설치 위치도 알맞게 설치
3. 설치후 파일명 php 변경
```
PHP 7.4 NTS 다운로드 → C:\php에 압축 해제 여기까지했고 php.ini-development php.ini-production
개발 환경  할거니 dev 부분 복사해서 `php.ini` 만들기

; Directory in which the loadable extensions (modules) reside.
; http://php.net/extension-dir
`extension_dir = "C:\php\ext"` 이걸 주석 제거 및 추가
extension=mysqli
extension=pdo_mysql
extension=mbstring
short_open_tag = On
cgi.fix_pathinfo=1

윈도우에서 개발시 해당 아래 부분과 맞아야함.

     location ~ \.php$ {
            root           html;
            fastcgi_pass   127.0.0.1:9000;
            fastcgi_index  index.php;
            fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
            include        fastcgi_params;
        }

그누보드, mysql 연동, 한글처리, FastCGI 처리 문제 예방가능
```
## 실행
```
Window PowerShell 또는 터미널 (php실행)
C:\php\php-cgi.exe -b 127.0.0.1:9000
Ctrl + C 종료


Window PowerShell 또는 터미널 (nignx 실)
강제 종료
taskkill /IM nginx.exe /F
cd C:\nginx
.\nginx.exe
```

## 테스트
```
nginx 서버를 실행하면 localhost에서의 index.html실행되어야함.
html/info 파일에서의 info.php 파일생성 후
<?php 
    phpinfo();

저장 하고 localhost/info/info.php
실행이되고 버전나오면 성공
```

